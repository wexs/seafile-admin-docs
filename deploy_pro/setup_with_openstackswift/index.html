
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://haiwen.github.io/seafile-admin-docs/deploy_pro/setup_with_openstackswift/">
      
      
        <meta name="author" content="seafile">
      
      <link rel="shortcut icon" href="../../media/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.7">
    
    
      
        <title>Setup With OpenStackSwift - Seafile admin manual</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.19753c6b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.196e0c26.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#setup-with-openstackswift" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://haiwen.github.io/seafile-admin-docs/" title="Seafile admin manual" class="md-header-nav__button md-logo" aria-label="Seafile admin manual">
      
  <img src="../../media/seafile-transparent-1024.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Seafile admin manual
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Setup With OpenStackSwift
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/haiwen/seafile-admin-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    haiwen/seafile-admin-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://haiwen.github.io/seafile-admin-docs/" title="Seafile admin manual" class="md-nav__button md-logo" aria-label="Seafile admin manual">
      
  <img src="../../media/seafile-transparent-1024.png" alt="logo">

    </a>
    Seafile admin manual
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/haiwen/seafile-admin-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    haiwen/seafile-admin-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" >
    <label class="md-nav__link" for="nav-1">
      Overview
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Overview" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon"></span>
        Overview
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/components/" class="md-nav__link">
      Seafile Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/file_permission_management/" class="md-nav__link">
      File permission management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../roadmap/" class="md-nav__link">
      Roadmap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../faq/" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contribution/" class="md-nav__link">
      Contribution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/" class="md-nav__link">
      Changelog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
    <label class="md-nav__link" for="nav-2">
      Deploy Seafile under Linux
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Deploy Seafile under Linux" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Deploy Seafile under Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/using_sqlite/" class="md-nav__link">
      Deploy with SQLite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/using_mysql/" class="md-nav__link">
      Deploy with MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_with_docker/" class="md-nav__link">
      Deploy with Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_with_nginx/" class="md-nav__link">
      Config Seahub with Nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/https_with_nginx/" class="md-nav__link">
      Enabling Https with Nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_with_apache/" class="md-nav__link">
      Config Seahub with Apache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/https_with_apache/" class="md-nav__link">
      Enabling Https with Apache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/using_ldap/" class="md-nav__link">
      LDAP/AD Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-10" type="checkbox" id="nav-2-10" >
    <label class="md-nav__link" for="nav-2-10">
      Single Sign On
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Single Sign On" data-md-level="2">
      <label class="md-nav__title" for="nav-2-10">
        <span class="md-nav__icon md-icon"></span>
        Single Sign On
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/single_sign_on/" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/shibboleth_config/" class="md-nav__link">
      Shibboleth Authentication for Seafile v6.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/shibboleth_config_v6.3/" class="md-nav__link">
      Shibboleth Authentication for Seafile v6.3+
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/oauth/" class="md-nav__link">
      OAuth Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/remote_user/" class="md-nav__link">
      Remote User Authentication
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/using_syslog/" class="md-nav__link">
      Syslog Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-12" type="checkbox" id="nav-2-12" >
    <label class="md-nav__link" for="nav-2-12">
      Online File Preview and Edit
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Online File Preview and Edit" data-md-level="2">
      <label class="md-nav__title" for="nav-2-12">
        <span class="md-nav__icon md-icon"></span>
        Online File Preview and Edit
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/libreoffice_online/" class="md-nav__link">
      LibreOffice Online Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/only_office/" class="md-nav__link">
      OnlyOffice Integration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/ocm/" class="md-nav__link">
      Open Cloud Mesh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-14" type="checkbox" id="nav-2-14" >
    <label class="md-nav__link" for="nav-2-14">
      Other Deployment Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Other Deployment Notes" data-md-level="2">
      <label class="md-nav__title" for="nav-2-14">
        <span class="md-nav__icon md-icon"></span>
        Other Deployment Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/start_seafile_at_system_bootup/" class="md-nav__link">
      Start Seafile at System Bootup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/using_firewall/" class="md-nav__link">
      Firewall settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/using_logrotate/" class="md-nav__link">
      Logrotate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/add_memcached/" class="md-nav__link">
      Add Memcached
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_seafile_behind_nat/" class="md-nav__link">
      Deploy Seafile behind NAT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_seahub_at_non-root_domain/" class="md-nav__link">
      Deploy Seahub at Non-root domain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/migrate_from_sqlite_to_mysql/" class="md-nav__link">
      Migrate From SQLite to MySQL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../faq/" class="md-nav__link">
      Common Problems for Setting up Server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
    <label class="md-nav__link" for="nav-3">
      Deploy Seafile Pro Edition
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Deploy Seafile Pro Edition" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Deploy Seafile Pro Edition
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../download_and_setup_seafile_professional_server/" class="md-nav__link">
      Download and Setup Seafile Professional Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deploy_with_docker/" class="md-nav__link">
      Deploy Seafile-pro with Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migrate_from_seafile_community_server/" class="md-nav__link">
      Migrate from Seafile Community Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading_seafile_professional_server/" class="md-nav__link">
      Upgrading Seafile Professional Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-6" type="checkbox" id="nav-3-6" >
    <label class="md-nav__link" for="nav-3-6">
      LDAP/AD Integration
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="LDAP/AD Integration" data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        <span class="md-nav__icon md-icon"></span>
        LDAP/AD Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../using_ldap_pro/" class="md-nav__link">
      LDAP Configuration for Seafile Pro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ldap_group_sync/" class="md-nav__link">
      Importing Groups from LDAP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ldap_role_sync/" class="md-nav__link">
      Importing Roles from LDAP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-7" type="checkbox" id="nav-3-7" >
    <label class="md-nav__link" for="nav-3-7">
      Online File Preview and Edit
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Online File Preview and Edit" data-md-level="2">
      <label class="md-nav__title" for="nav-3-7">
        <span class="md-nav__icon md-icon"></span>
        Online File Preview and Edit
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../office_documents_preview/" class="md-nav__link">
      Office Documents Preview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../office_web_app/" class="md-nav__link">
      Office Online Server Integration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../details_about_file_search/" class="md-nav__link">
      File Search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-9" type="checkbox" id="nav-3-9" >
    <label class="md-nav__link" for="nav-3-9">
      Virus Scan
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Virus Scan" data-md-level="2">
      <label class="md-nav__title" for="nav-3-9">
        <span class="md-nav__icon md-icon"></span>
        Virus Scan
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../virus_scan/" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deploy_clamav_as_daemon/" class="md-nav__link">
      Run ClamAV as a Daemon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../virus_scan_with_kav4fs/" class="md-nav__link">
      Virus Scan With Kav4fs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-10" type="checkbox" id="nav-3-10" >
    <label class="md-nav__link" for="nav-3-10">
      Storage Backends
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Storage Backends" data-md-level="2">
      <label class="md-nav__title" for="nav-3-10">
        <span class="md-nav__icon md-icon"></span>
        Storage Backends
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../setup_with_amazon_s3/" class="md-nav__link">
      Amazon S3 Backend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../setup_with_ceph/" class="md-nav__link">
      Ceph Backend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../setup_with_swift/" class="md-nav__link">
      OpenStack Swift Backend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multiple_storage_backends/" class="md-nav__link">
      Multiple Storage Backends
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migrate/" class="md-nav__link">
      Data migration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-11" type="checkbox" id="nav-3-11" >
    <label class="md-nav__link" for="nav-3-11">
      Cluster Deployment
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Cluster Deployment" data-md-level="2">
      <label class="md-nav__title" for="nav-3-11">
        <span class="md-nav__icon md-icon"></span>
        Cluster Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../deploy_in_a_cluster/" class="md-nav__link">
      Deploy in a cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../enable_search_and_background_tasks_in_a_cluster/" class="md-nav__link">
      Search and background tasks in a cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../memcached_mariadb_cluster/" class="md-nav__link">
      Memcache and MariaDB Cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../setup_seafile_cluster_with_nfs/" class="md-nav__link">
      Setup Seafile cluster with NFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrade_a_cluster/" class="md-nav__link">
      Upgrade a cluster
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-12" type="checkbox" id="nav-3-12" >
    <label class="md-nav__link" for="nav-3-12">
      Advanced User Management
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Advanced User Management" data-md-level="2">
      <label class="md-nav__title" for="nav-3-12">
        <span class="md-nav__icon md-icon"></span>
        Advanced User Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../multi_institutions/" class="md-nav__link">
      Multi-Institutions Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../roles_permissions/" class="md-nav__link">
      Roles and Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../admin_roles_permissions/" class="md-nav__link">
      Administrator Roles and Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multi_tenancy/" class="md-nav__link">
      Multi-Tenancy Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-13" type="checkbox" id="nav-3-13" >
    <label class="md-nav__link" for="nav-3-13">
      Advanced Authentication
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Advanced Authentication" data-md-level="2">
      <label class="md-nav__title" for="nav-3-13">
        <span class="md-nav__icon md-icon"></span>
        Advanced Authentication
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../two_factor_authentication/" class="md-nav__link">
      Two-factor Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../adfs/" class="md-nav__link">
      ADFS or SAML 2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cas/" class="md-nav__link">
      CAS Authentication
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-14" type="checkbox" id="nav-3-14" >
    <label class="md-nav__link" for="nav-3-14">
      Advanced Maintenance Tools
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Advanced Maintenance Tools" data-md-level="2">
      <label class="md-nav__title" for="nav-3-14">
        <span class="md-nav__icon md-icon"></span>
        Advanced Maintenance Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../real_time_backup/" class="md-nav__link">
      Real-time Backup Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../seaf_import/" class="md-nav__link">
      Import Directory To Seafile
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../seafile_professional_sdition_software_license_agreement/" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    <label class="md-nav__link" for="nav-4">
      Deploy Seafile with Docker
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Deploy Seafile with Docker" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Deploy Seafile with Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/deploy%20seafile%20with%20docker/" class="md-nav__link">
      Deploy Seafile with Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/pro-edition/Deploy%20Seafile-pro%20with%20Docker/" class="md-nav__link">
      Deploy Seafile Pro Edition with Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/pro-edition/Migrate%20CE%20to%20Pro%20with%20Docker/" class="md-nav__link">
      Migrate CE to Pro with Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4" >
    <label class="md-nav__link" for="nav-4-4">
      Upgrade from 6.3 to 7.0
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Upgrade from 6.3 to 7.0" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        <span class="md-nav__icon md-icon"></span>
        Upgrade from 6.3 to 7.0
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/6.3%20upgrade%20to%207.0/" class="md-nav__link">
      Upgrade Seafile Docker CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/pro-edition/6.3%20upgrade%20to%207.0/" class="md-nav__link">
      Upgrade Seafile Docker Pro
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5" >
    <label class="md-nav__link" for="nav-4-5">
      Upgrade for other versions
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Upgrade for other versions" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        <span class="md-nav__icon md-icon"></span>
        Upgrade for other versions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/upgrade/7.0_7.1/" class="md-nav__link">
      7.0 to 7.1
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
    <label class="md-nav__link" for="nav-5">
      Configuration and Customization
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Configuration and Customization" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Configuration and Customization
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../config/" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../config/ccnet-conf/" class="md-nav__link">
      ccnet.conf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../config/seafile-conf/" class="md-nav__link">
      seafile.conf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../config/seahub_settings_py/" class="md-nav__link">
      seahub_settings.py
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../config/seafevents-conf/" class="md-nav__link">
      seafevents.conf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../config/seahub_customization/" class="md-nav__link">
      Seahub customization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../config/sending_email/" class="md-nav__link">
      Email Sending
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
    <label class="md-nav__link" for="nav-6">
      Administration
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Administration" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Administration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../maintain/" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../maintain/account/" class="md-nav__link">
      Account management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../maintain/logs/" class="md-nav__link">
      Logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../maintain/backup_recovery/" class="md-nav__link">
      Backup and Recovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../maintain/seafile_fsck/" class="md-nav__link">
      Seafile FSCK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../maintain/seafile_gc/" class="md-nav__link">
      Seafile GC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../maintain/clean_database/" class="md-nav__link">
      Clean database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../maintain/export_report/" class="md-nav__link">
      Export report
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
    <label class="md-nav__link" for="nav-7">
      Upgrade Seafile server
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Upgrade Seafile server" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Upgrade Seafile server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../upgrade/upgrade/" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../upgrade/upgrade_notes_for_5.x.x/" class="md-nav__link">
      Upgrade notes for 5.x.x
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../upgrade/upgrade_notes_for_6.x.x/" class="md-nav__link">
      Upgrade notes for 6.x.x
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../upgrade/upgrade_notes_for_7.0.x/" class="md-nav__link">
      Upgrade notes for 7.0.x
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../upgrade/upgrade_notes_for_7.1.x/" class="md-nav__link">
      Upgrade notes for 7.1.x
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" >
    <label class="md-nav__link" for="nav-8">
      WebDAV and FUSE extensions
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="WebDAV and FUSE extensions" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        WebDAV and FUSE extensions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../extension/" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extension/webdav/" class="md-nav__link">
      WebDAV extension
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extension/fuse/" class="md-nav__link">
      FUSE extension
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9" >
    <label class="md-nav__link" for="nav-9">
      Security and Auditing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Security and Auditing" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon"></span>
        Security and Auditing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/security_features/" class="md-nav__link">
      Security features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/auditing/" class="md-nav__link">
      Access logs and auditing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/fail2ban/" class="md-nav__link">
      Config fail2ban
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10" >
    <label class="md-nav__link" for="nav-10">
      Developing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Developing" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        <span class="md-nav__icon md-icon"></span>
        Developing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10-2" type="checkbox" id="nav-10-2" >
    <label class="md-nav__link" for="nav-10-2">
      How to Build Seafile
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="How to Build Seafile" data-md-level="2">
      <label class="md-nav__title" for="nav-10-2">
        <span class="md-nav__icon md-icon"></span>
        How to Build Seafile
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../build_seafile/" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../build_seafile/linux/" class="md-nav__link">
      Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../build_seafile/freebsd/" class="md-nav__link">
      FreeBSD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../build_seafile/osx/" class="md-nav__link">
      Mac OS X
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../build_seafile/server/" class="md-nav__link">
      Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../build_seafile/rpi/" class="md-nav__link">
      Raspberry Pi
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/env/" class="md-nav__link">
      Develop env
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/translation/" class="md-nav__link">
      Translation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/web_api_v2.1/" class="md-nav__link">
      Web API V2.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/python_api/" class="md-nav__link">
      Python API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/rene-s/Seafile-PHP-SDK" class="md-nav__link">
      PHP API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/data_model/" class="md-nav__link">
      Data Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/server-components/" class="md-nav__link">
      Server Components
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" >
    <label class="md-nav__link" for="nav-11">
      ChangeLog
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="ChangeLog" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        <span class="md-nav__icon md-icon"></span>
        ChangeLog
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/server-changelog/" class="md-nav__link">
      Seafile Community Edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/changelog-for-seafile-professional-server/" class="md-nav__link">
      Seafile Professional Edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/client-changelog/" class="md-nav__link">
      Seafile Client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/drive-client-changelog/" class="md-nav__link">
      Drive Client ChangeLog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#seafile-server-preparation" class="md-nav__link">
    Seafile Server Preparation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swift-preparation" class="md-nav__link">
    Swift Preparation
  </a>
  
    <nav class="md-nav" aria-label="Swift Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-swift3" class="md-nav__link">
    Install Swift3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-keystonmiddleware" class="md-nav__link">
    Install keystonmiddleware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modify-proxy-serverconf-for-swift" class="md-nav__link">
    Modify proxy-server.conf for Swift
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart-swift" class="md-nav__link">
    Restart Swift
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-swift-via-s3-api" class="md-nav__link">
    Accessing Swift via S3 API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modify-seafileconf" class="md-nav__link">
    Modify seafile.conf
  </a>
  
    <nav class="md-nav" aria-label="Modify seafile.conf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-memcached-cluster" class="md-nav__link">
    Using memcached cluster
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-and-test" class="md-nav__link">
    Run and Test
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/haiwen/seafile-admin-docs/blob/master/manual/deploy_pro/setup_with_openstackswift.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="setup-with-openstackswift">Setup With OpenStackSwift<a class="headerlink" href="#setup-with-openstackswift" title="Permanent link">&para;</a></h1>
<p><strong>Note</strong>: Since Seafile Server 5.0.0, all config files are moved to the central <strong>conf</strong> folder. <a href="../../deploy/new_directory_layout_5_0_0/">Read More</a>.</p>
<p>Note: This documentation is obsolete. Please refer to <a href="../setup_with_swift/">the new documentation about how to use Swift</a>.</p>
<p>Starting from professional server 2.0.5, Seafile can use S3-compatible cloud storage (such as OpenStack/Swift) as backend. This document will use Swift as example.</p>
<h2 id="seafile-server-preparation">Seafile Server Preparation<a class="headerlink" href="#seafile-server-preparation" title="Permanent link">&para;</a></h2>
<p>To setup Seafile Professional Server with OpenStack Swift:</p>
<ul>
<li>Setup the basic Seafile Professional Server following the guide on <a href="../download_and_setup_seafile_professional_server/">Download and Setup Seafile Professional Server</a></li>
<li>Install the python <code>boto</code> library. It's needed to access Swift.</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="err">sudo easy_install boto</span>
</code></pre></div>

<p>For best performance, Seafile requires install memcached and enable memcache for objects. </p>
<p>We recommend to allocate 128MB memory for memcached. Edit /etc/memcached.conf</p>
<div class="codehilite"><pre><span></span><code><span class="err"># Start with a cap of 64 megs of memory. It&#39;s reasonable, and the daemon default</span>
<span class="err"># Note that the daemon will grow to this size, but does not start out holding this much</span>
<span class="err"># memory</span>
<span class="err"># -m 64</span>
<span class="err">-m 128</span>
</code></pre></div>

<h2 id="swift-preparation">Swift Preparation<a class="headerlink" href="#swift-preparation" title="Permanent link">&para;</a></h2>
<p>In a production environment, you'll configure Swift with S3 middleware and use Keystone for authentication. The following instructions assumes you've already setup Swift with Keystone authentication. We'll focus on the change you need to make Swift work with S3 middleware.</p>
<h3 id="install-swift3">Install Swift3<a class="headerlink" href="#install-swift3" title="Permanent link">&para;</a></h3>
<p>This middleware implements S3 API for Swift.</p>
<div class="codehilite"><pre><span></span><code><span class="err">git clone https://github.com/fujita/swift3.git</span>
<span class="err">cd swift3</span>
<span class="err">sudo python setup.py install</span>
</code></pre></div>

<h3 id="install-keystonmiddleware">Install keystonmiddleware<a class="headerlink" href="#install-keystonmiddleware" title="Permanent link">&para;</a></h3>
<p>This middleware contains the <code>s3token</code> filter for authentication between S3 API and Keystone. If you've configured Swift to work with Keystone, you should have this middleware installed already.</p>
<div class="codehilite"><pre><span></span><code><span class="err">git clone https://github.com/openstack/keystonemiddleware.git</span>
<span class="err">cd keystonmiddleware</span>
<span class="err">sudo pip install -r requirements.txt</span>
<span class="err">sudo python setup.py install</span>
</code></pre></div>

<h3 id="modify-proxy-serverconf-for-swift">Modify proxy-server.conf for Swift<a class="headerlink" href="#modify-proxy-serverconf-for-swift" title="Permanent link">&para;</a></h3>
<p>On Ubuntu, the config file is <code>/etc/swift/proxy-server.conf</code>.</p>
<p>First check whether you've replaced <code>tempauth</code> with <code>authtoken keystoneauth</code> in the main pipeline. This should have been done if you configured Swift to work with Keystone.</p>
<p>Add <code>swift3 s3token</code> to <code>[pipeline:main]</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[pipeline:main]</span>
<span class="na">pipeline</span> <span class="o">=</span> <span class="s">[...] swift3 s3token authtoken keystoneauth proxy-server</span>
</code></pre></div>

<p>Add filters:</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">filter</span><span class="p">:</span><span class="n">swift3</span><span class="p">]</span>  
<span class="n">use</span> <span class="o">=</span> <span class="n">egg</span><span class="p">:</span><span class="n">swift3</span><span class="o">#</span><span class="n">swift3</span>

<span class="p">[</span><span class="n">filter</span><span class="p">:</span><span class="n">s3token</span><span class="p">]</span>  
<span class="n">paste</span><span class="p">.</span><span class="n">filter_factory</span> <span class="o">=</span> <span class="n">keystonemiddleware</span><span class="p">.</span><span class="n">s3_token</span><span class="p">:</span><span class="n">filter_factory</span>  
<span class="n">auth_port</span> <span class="o">=</span> <span class="mi">35357</span>  
<span class="n">auth_host</span> <span class="o">=</span> <span class="p">[</span><span class="n">keystone</span><span class="o">-</span><span class="n">ip</span><span class="p">]</span>  
<span class="n">auth_protocol</span> <span class="o">=</span> <span class="n">http</span>  
</code></pre></div>

<h3 id="restart-swift">Restart Swift<a class="headerlink" href="#restart-swift" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="err">swift-init proxy restart</span>
</code></pre></div>

<h3 id="accessing-swift-via-s3-api">Accessing Swift via S3 API<a class="headerlink" href="#accessing-swift-via-s3-api" title="Permanent link">&para;</a></h3>
<p>To access it via S3 API, you'll need AWS-like access key id and secret access key. Generate it with the following command for your specific tenant and user (You should change the tenant-id and user-id):</p>
<div class="codehilite"><pre><span></span><code><span class="err">keystone ec2-credentials-create --tenant-id=d6fdc8460c7b46d0ad24aa23667b85c3 --user-id=b66742a744eb4fc98abd945781bf969d</span>
</code></pre></div>

<p>After successfully setup S3 middleware, you should be able to access it with any S3 clients. The next thing you need to do is to create buckets for Seafile. With Python boto library you can do as follows (replace <code>key_id</code> and <code>secret_key</code> with your own):</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">boto</span>
<span class="kn">import</span> <span class="nn">boto.s3.connection</span>

<span class="n">connection</span> <span class="o">=</span> <span class="n">boto</span><span class="o">.</span><span class="n">connect_s3</span><span class="p">(</span>
    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="s1">&#39;&lt;key_id&gt;&#39;</span><span class="p">,</span>
    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="s1">&#39;&lt;secret_key&gt;&#39;</span><span class="p">,</span>
    <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span>
    <span class="n">host</span><span class="o">=</span><span class="s1">&#39;swift-proxy-server-address&#39;</span><span class="p">,</span>
    <span class="n">is_secure</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">calling_format</span><span class="o">=</span><span class="n">boto</span><span class="o">.</span><span class="n">s3</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">OrdinaryCallingFormat</span><span class="p">())</span>
<span class="n">connection</span><span class="o">.</span><span class="n">create_bucket</span><span class="p">(</span><span class="s1">&#39;seafile-commits&#39;</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">create_bucket</span><span class="p">(</span><span class="s1">&#39;seafile-fs&#39;</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">create_bucket</span><span class="p">(</span><span class="s1">&#39;seafile-blocks&#39;</span><span class="p">)</span>
</code></pre></div>

<p>Each S3 bucket maps to a container in Swift. So you can use native Swift command line to check the containers. For example:</p>
<div class="codehilite"><pre><span></span><code><span class="n">swift</span><span class="w"> </span><span class="o">-</span><span class="n">V</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//[</span><span class="n">keystone_ip</span><span class="o">]</span><span class="err">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">v2</span><span class="mf">.0</span><span class="w"> </span><span class="o">-</span><span class="n">U</span><span class="w"> </span><span class="o">[</span><span class="n">tenant</span><span class="o">]</span><span class="err">:</span><span class="o">[</span><span class="n">user</span><span class="o">]</span><span class="w"> </span><span class="o">-</span><span class="n">K</span><span class="w"> </span><span class="o">[</span><span class="n">pas</span><span class="o">]</span><span class="w"> </span><span class="n">list</span><span class="w"></span>
</code></pre></div>

<h2 id="modify-seafileconf">Modify seafile.conf<a class="headerlink" href="#modify-seafileconf" title="Permanent link">&para;</a></h2>
<p>Append the following lines to <code>seafile.conf</code> (replace <code>key_id</code> and <code>secret_key</code> with your own)</p>
<div class="codehilite"><pre><span></span><code><span class="k">[block_backend]</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">s3</span>
<span class="na">bucket</span> <span class="o">=</span> <span class="s">seafile-blocks</span>
<span class="na">key_id</span> <span class="o">=</span> <span class="s">&lt;key_id&gt;</span>
<span class="na">key</span> <span class="o">=</span> <span class="s">&lt;secret_key&gt;</span>
<span class="na">host</span> <span class="o">=</span> <span class="s">&lt;swift-proxy-server-address&gt;:8080</span>
<span class="na">path_style_request</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">memcached_options</span> <span class="o">=</span> <span class="s">--SERVER=localhost --POOL-MIN=10 --POOL-MAX=100</span>

<span class="k">[commit_object_backend]</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">s3</span>
<span class="na">bucket</span> <span class="o">=</span> <span class="s">seafile-commits</span>
<span class="na">key_id</span> <span class="o">=</span> <span class="s">&lt;key_id&gt;</span>
<span class="na">key</span> <span class="o">=</span> <span class="s">&lt;secret_key&gt;</span>
<span class="na">host</span> <span class="o">=</span> <span class="s">&lt;swift-proxy-server-address&gt;:8080</span>
<span class="na">path_style_request</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">memcached_options</span> <span class="o">=</span> <span class="s">--SERVER=localhost --POOL-MIN=10 --POOL-MAX=100</span>

<span class="k">[fs_object_backend]</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">s3</span>
<span class="na">bucket</span> <span class="o">=</span> <span class="s">seafile-fs</span>
<span class="na">key_id</span> <span class="o">=</span> <span class="s">&lt;key_id&gt;</span>
<span class="na">key</span> <span class="o">=</span> <span class="s">&lt;secret_key&gt;</span>
<span class="na">host</span> <span class="o">=</span> <span class="s">&lt;swift-proxy-server-address&gt;:8080</span>
<span class="na">path_style_request</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">memcached_options</span> <span class="o">=</span> <span class="s">--SERVER=localhost --POOL-MIN=10 --POOL-MAX=100</span>
</code></pre></div>

<h3 id="using-memcached-cluster">Using memcached cluster<a class="headerlink" href="#using-memcached-cluster" title="Permanent link">&para;</a></h3>
<p>In a cluster environment, you may want to use a memcached cluster. In the above configuration, you have to specify all the memcached server node addresses in seafile.conf</p>
<div class="codehilite"><pre><span></span><code><span class="err">memcached_options = --SERVER=192.168.1.134 --SERVER=192.168.1.135 --SERVER=192.168.1.136 --POOL-MIN=10 --POOL-MAX=100</span>
</code></pre></div>

<h2 id="run-and-test">Run and Test<a class="headerlink" href="#run-and-test" title="Permanent link">&para;</a></h2>
<p>Now you can start Seafile by <code>./seafile.sh start</code> and <code>./seahub.sh start</code> and visit the website.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 seafile
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/haiwen/seafile-admin-docs/" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.0ac82a11.min.js"></script>
      <script src="../../assets/javascripts/bundle.f81dfb4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>